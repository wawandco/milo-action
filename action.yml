name: 'Milo'
description: 'Runs milo on the passed folder'
inputs:
  folder:
    description: |
      The folder that milo will scan. The value set here will
      be passed to the milo command.
    required: false
    default: "./..."
runs:
  using: "composite"
  steps:
    - id: install_go
      uses: actions/setup-go@v3
      with:
        go-version: "1.18.x"

    - id: install_milo
      run: go install "github.com/wawandco/milo/cmd/milo@v0.6.0"
      shell: bash
    
    - id: run_milo
      env:
        folder: ${{ inputs.folder }}
      working-directory: .
      run: |
        milo review "${folder}"
      shell: bash